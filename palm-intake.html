<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Intake – TrAVeller.ai</title>

  <!-- algemene styles -->
  <link rel="stylesheet" href="assets/css/style.css?v=5" />

  <!-- intake-specifieke styles -->
  <link rel="stylesheet" href="assets/css/style-intake.css?v=1" />

  <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="images/traiveller-logo.png" />
  <link rel="apple-touch-icon" href="images/traiveller-logo.png" />
</head>
<body>
  <main class="container">
    <div class="form-card">
      <h1>Plan mijn slimme reis</h1>
      <p>Vul de vragen in of kies <button type="button" id="surpriseBtn" class="cta">Verras me</button></p>

      <form id="intakeForm" novalidate>
        <!-- Honeypot -->
        <input type="text" name="company" class="hidden" tabindex="-1" autocomplete="off">

        <!-- 1. Datums -->
        <label>
          Vertrekdatum*
          <input type="date" name="start_date" id="startDate" required>
        </label>
        <label>
          Terugkomstdatum*
          <input type="date" name="end_date" id="endDate" required>
        </label>
        <label>
          Flexibiliteit
          <select name="flexibility">
            <option value="">Geen</option>
            <option>3-5 dagen</option>
            <option>7-9 dagen</option>
            <option>10-14 dagen</option>
          </select>
        </label>

        <!-- 2. Bestemming -->
        <label>
          Bestemming(en)*
          <select name="destination" required>
            <option>Aruba</option>
            <option>Curacao</option>
            <option>Bali</option>
            <option>New York</option>
            <option>Tokyo</option>
            <option value="other">Andere (invullen)</option>
          </select>
        </label>
        <input type="text" name="destination_other" placeholder="Andere bestemming" />

        <!-- 3. Vertrek vanaf -->
        <label>
          Vertrek vanaf*
          <select name="departure" required>
            <option>Amsterdam (AMS)</option>
            <option>Rotterdam (RTM)</option>
            <option>Eindhoven (EIN)</option>
            <option>Düsseldorf (DUS)</option>
            <option>Brussel (BRU)</option>
          </select>
        </label>

        <!-- 4. Aantal personen -->
        <label>
          Volwassenen*
          <input type="number" name="adults" min="1" max="10" required>
        </label>
        <label>
          Kinderen
          <input type="number" name="children" min="0" max="10">
        </label>
        <div id="childrenAges"></div>

        <!-- 5. Vluchtopties -->
        <label>
          Vlucht
          <select name="flight">
            <option>Direct</option>
            <option>Tussenstop</option>
          </select>
        </label>
        <label>
          Klasse
          <select name="class">
            <option>Economy</option>
            <option>Premium Economy</option>
            <option>Business</option>
            <option>First Class</option>
          </select>
        </label>

        <!-- 6. Huurauto -->
        <label>
          Huurauto
          <select name="car_rental" id="carRental">
            <option>Nee</option>
            <option>Ja</option>
          </select>
        </label>
        <div id="carOptions" class="hidden">
          <label>Type auto
            <select name="car_type">
              <option>Hatchback</option>
              <option>Sedan</option>
              <option>MPV</option>
              <option>SUV</option>
              <option>Terreinwagen</option>
            </select>
          </label>
          <label>Bestuurdersleeftijd
            <input type="number" name="driver_age" min="18" max="80">
          </label>
          <label>Transmissie
            <select name="transmission">
              <option>Geen voorkeur</option>
              <option>Automaat</option>
              <option>Handgeschakeld</option>
            </select>
          </label>
        </div>

        <!-- 7. Accommodatie -->
        <label>
          Type accommodatie
          <select name="accommodation">
            <option>Hotel</option>
            <option>Appartement</option>
            <option>Huis</option>
            <option>Hostel</option>
            <option>All inclusive</option>
          </select>
        </label>

        <!-- 8. Budget -->
        <label>
          Budget
          <select name="budget">
            <option value="250">€250</option>
            <option value="500">€500</option>
            <option value="750">€750</option>
            <option value="1000">€1000</option>
            <option value="custom">Anders</option>
          </select>
        </label>
        <input type="number" name="budget_custom" placeholder="Eigen budget (€)" />

        <!-- 9. Type reis -->
        <label>
          Type reis
          <select name="trip_type">
            <option>Strand</option>
            <option>Avontuurlijk</option>
            <option>Luxe</option>
            <option>Citytrip</option>
            <option>Familievakantie</option>
            <option>Wellness</option>
            <option>Natuur</option>
          </select>
        </label>

        <!-- 10. Opmerkingen -->
        <label>
          Opmerkingen
          <textarea name="notes" rows="4" placeholder="Specifieke wensen"></textarea>
        </label>

        <button type="submit" id="submitBtn" class="cta cta-yellow">Versturen</button>
        <p id="formMsg" class="muted" role="status"></p>
      </form>
    </div>
  </main>

  <script>
    // Datum niet in verleden
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('startDate').setAttribute('min', today);
    document.getElementById('endDate').setAttribute('min', today);

    // Kinderleeftijden tonen
    const childrenInput = document.querySelector('input[name="children"]');
    const childrenAges = document.getElementById('childrenAges');
    childrenInput.addEventListener('input', () => {
      childrenAges.innerHTML = '';
      const count = parseInt(childrenInput.value || 0, 10);
      for (let i=0; i<count; i++) {
        const lbl = document.createElement('label');
        lbl.textContent = `Leeftijd kind ${i+1}`;
        const inp = document.createElement('input');
        inp.type = 'number'; inp.name = `child_age_${i+1}`; inp.min = 0; inp.max = 17;
        lbl.appendChild(inp);
        childrenAges.appendChild(lbl);
      }
    });

    // Huurauto opties tonen
    document.getElementById('carRental').addEventListener('change', e => {
      document.getElementById('carOptions').classList.toggle('hidden', e.target.value !== 'Ja');
    });

    // Verras me knop
    document.getElementById('surpriseBtn').addEventListener('click', () => {
      const form = document.getElementById('intakeForm');
      [...form.elements].forEach(el => {
        if (!['start_date','end_date','adults','children','budget','budget_custom','company'].includes(el.name)) {
          el.closest('label')?.classList.add('hidden');
          if(el.tagName === 'DIV') el.classList.add('hidden');
        }
      });
    });
  </script>
</body>
</html>
