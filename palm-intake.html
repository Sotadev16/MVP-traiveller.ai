<!-- FILE: palm-intake.html -->
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Intake – TrAIveller.ai</title>
  <link rel="icon" type="image/png" href="images/traiveller-logo.png" />
  <style>
    :root{
      --bg:#0b0f1a; --panel:#0f1627; --fg:#e9eef7; --muted:#9fb0c7;
      --accent:#0ea5e9; --cta:#facc15; --ok:#22c55e; --err:#ef4444;
      --b:#22304a;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
         background:linear-gradient(180deg,#071120,#0b172a 40%,#09121f);
         color:var(--fg)}
    header{
      display:flex;gap:12px;align-items:center;justify-content:center;
      padding:16px 12px;border-bottom:1px solid #1b2740;
      background:rgba(8,15,28,.6); backdrop-filter: blur(8px); position:sticky; top:0; z-index:10
    }
    header img{height:34px}
    main{width:min(1100px,92vw); margin:24px auto 80px}
    h1{margin:.2rem 0 1rem;font-size:clamp(22px,3vw,30px)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{
      grid-column:span 12;background:var(--panel); border:1px solid #1b2740;border-radius:16px;
      box-shadow:0 18px 50px rgba(0,0,0,.35); overflow:hidden
    }
    .card h2{font-size:clamp(16px,2.4vw,20px);margin:0;padding:14px 16px;border-bottom:1px solid #1b2740;background:#0e1a2d}
    .body{padding:16px}
    label{display:block;margin:.35rem 0 .3rem;color:var(--muted);font-size:.95rem}
    input,select{
      width:100%;padding:.7rem .8rem;border-radius:10px;border:1px solid var(--b);
      background:#0b1526;color:var(--fg)
    }
    .row{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    .col-6{grid-column:span 6} .col-4{grid-column:span 4} .col-3{grid-column:span 3} .col-8{grid-column:span 8} .col-12{grid-column:span 12}
    @media (max-width:780px){ .col-6,.col-4,.col-3,.col-8{grid-column:span 12} }

    .hint{font-size:.85rem;color:var(--muted)}
    .tag{display:inline-block;padding:.25rem .55rem;background:#10203a;border:1px solid #1b2b47;border-radius:999px;font-size:.8rem;margin-right:.35rem}
    .actions{display:flex;gap:10px;justify-content:flex-end;padding:16px;border-top:1px solid #1b2740;background:#0e1a2d}
    .btn{
      border:0;border-radius:999px;padding:.85rem 1.2rem;font-weight:800;cursor:pointer
    }
    .btn-ghost{background:#111c30;color:#cfe2ff;border:1px solid #22304a}
    .btn-cta{background:var(--cta); color:#111; box-shadow:0 12px 30px rgba(0,0,0,.35)}
    .err{color:var(--err);font-size:.9rem;margin-top:6px;display:none}
    .hidden{display:none}
    .pill{display:flex;gap:8px;flex-wrap:wrap}
    .pill input[type="radio"], .pill input[type="checkbox"]{display:none}
    .pill label{
      border:1px solid #22304a;border-radius:999px;padding:.45rem .8rem;cursor:pointer;background:#0c1830
    }
    .pill input:checked + label{background:#17315a;border-color:#335081}
  </style>
</head>
<body>
  <header>
    <img src="images/traiveller-logo.png" alt="TrAIveller.ai" />
    <strong>Intake</strong>
  </header>

  <main>
    <h1>Vertel ons je wensen</h1>

    <form id="f" class="grid" novalidate>
      <!-- TYPE VAKANTIE -->
      <section class="card">
        <h2>1) Type vakantie</h2>
        <div class="body">
          <div class="pill" role="radiogroup" aria-label="Type vakantie">
            <input type="radio" id="type-surprise"   name="type" value="surprise" checked>
            <label for="type-surprise">🎁 Verrassing</label>
            <input type="radio" id="type-flight"     name="type" value="flight">
            <label for="type-flight">✈️ Vlucht</label>
            <input type="radio" id="type-cruise"     name="type" value="cruise">
            <label for="type-cruise">🚢 Cruise</label>
          </div>
          <p class="hint">Kies “Verrassing” als je ons laat kiezen binnen je budget & voorkeuren.</p>
        </div>
      </section>

      <!-- GEMEENSCHAPPELIJKE BASIS: DATUMS, PERSONEN, BUDGET -->
      <section class="card">
        <h2>2) Reisperiode, personen & budget</h2>
        <div class="body">
          <div class="row">
            <div class="col-4">
              <label for="depart">Vertrekdatum</label>
              <input type="date" id="depart" name="depart" required>
            </div>
            <div class="col-4">
              <label for="return">Retourdatum</label>
              <input type="date" id="return" name="return" required>
            </div>
            <div class="col-4">
              <label for="flex">Flexibiliteit</label>
              <select id="flex" name="flex">
                <option value="0">Niet flexibel</option>
                <option value="2">±2 dagen</option>
                <option value="3">±3 dagen</option>
                <option value="7">±7 dagen</option>
              </select>
            </div>
          </div>

          <div class="row" style="margin-top:8px">
            <div class="col-4">
              <label for="adults">Volwassenen</label>
              <input type="number" id="adults" name="adults" min="1" value="2" required>
            </div>
            <div class="col-4">
              <label for="children">Kinderen</label>
              <input type="number" id="children" name="children" min="0" value="0">
            </div>
            <div class="col-4">
              <label for="budget">Budget (totaal)</label>
              <select id="budgetPreset">
                <option value="250">€250</option>
                <option value="500">€500</option>
                <option value="750">€750</option>
                <option value="1000" selected>€1000</option>
                <option value="custom">Eigen bedrag…</option>
              </select>
              <input type="number" id="budgetCustom" class="hidden" min="50" step="50" placeholder="Bijv. 1500" />
              <input type="hidden" id="budget" name="budget" value="1000" />
            </div>
          </div>

          <div id="kidsAges" class="row hidden" style="margin-top:8px"></div>

          <div id="baseErr" class="err">Controleer je invoer.</div>
        </div>
      </section>

      <!-- VERRASSING SPECIFIEK -->
      <section id="block-surprise" class="card">
        <h2>3) Verras me – voorkeuren</h2>
        <div class="body">
          <div class="row">
            <div class="col-6">
              <label>Type reis</label>
              <div class="pill">
                <input type="checkbox" id="t-strand" value="strand" checked><label for="t-strand">🏝️ Strand</label>
                <input type="checkbox" id="t-city" value="citytrip"><label for="t-city">🏙️ Citytrip</label>
                <input type="checkbox" id="t-avontuur" value="avontuurlijk"><label for="t-avontuur">⛰️ Avontuurlijk</label>
                <input type="checkbox" id="t-luxe" value="luxe"><label for="t-luxe">💎 Luxe</label>
                <input type="checkbox" id="t-familie" value="familievakantie"><label for="t-familie">👨‍👩‍👧‍👦 Familie</label>
                <input type="checkbox" id="t-wellness" value="wellness"><label for="t-wellness">🧖 Wellness</label>
                <input type="checkbox" id="t-natuur" value="natuur"><label for="t-natuur">🌿 Natuur</label>
              </div>
            </div>
            <div class="col-6">
              <label for="surp-origin">Vertrek (luchthaven)</label>
              <select id="surp-origin">
                <option value="AMS" selected>AMS — Amsterdam</option>
                <option value="RTM">RTM — Rotterdam</option>
                <option value="EIN">EIN — Eindhoven</option>
                <option value="DUS">DUS — Düsseldorf</option>
                <option value="BRU">BRU — Brussel</option>
              </select>
              <p class="hint">We zoeken slimme opties vanaf jouw voorkeurluchthaven.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- VLUCHT SPECIFIEK -->
      <section id="block-flight" class="card hidden">
        <h2>3) Vlucht details</h2>
        <div class="body">
          <div class="row">
            <div class="col-6">
              <label for="f-origin">Vertrek (AMS/RTM/EIN/DUS/BRU)</label>
              <select id="f-origin">
                <option value="AMS" selected>AMS — Amsterdam</option>
                <option value="RTM">RTM — Rotterdam</option>
                <option value="EIN">EIN — Eindhoven</option>
                <option value="DUS">DUS — Düsseldorf</option>
                <option value="BRU">BRU — Brussel</option>
              </select>
            </div>
            <div class="col-6">
              <label for="f-dest">Bestemming</label>
              <select id="f-dest">
                <optgroup label="Populair (Aruba bovenaan)">
                  <option value="AUA" selected>Aruba (AUA)</option>
                  <option value="AGP">Malaga (AGP)</option>
                  <option value="PMI">Mallorca (PMI)</option>
                  <option value="AYT">Antalya (AYT)</option>
                  <option value="BCN">Barcelona (BCN)</option>
                </optgroup>
                <optgroup label="Wereldwijd">
                  <option value="DXB">Dubai (DXB)</option>
                  <option value="BKK">Bangkok (BKK)</option>
                  <option value="JFK">New York (JFK)</option>
                  <option value="CUN">Cancún (CUN)</option>
                  <option value="HND">Tokyo (HND)</option>
                </optgroup>
              </select>
            </div>
          </div>

          <div class="row" style="margin-top:8px">
            <div class="col-6">
              <label>Vluchtopties</label>
              <div class="pill">
                <input type="checkbox" id="direct" value="direct"><label for="direct">Direct</label>
                <input type="checkbox" id="stop" value="tussenstop"><label for="stop">Tussenstop oké</label>
              </div>
            </div>
            <div class="col-6">
              <label>Klasse</label>
              <div class="pill">
                <input type="radio" id="eco" name="cls" value="economy" checked><label for="eco">Economy</label>
                <input type="radio" id="prem" name="cls" value="premium"><label for="prem">Premium</label>
                <input type="radio" id="bus" name="cls" value="business"><label for="bus">Business</label>
                <input type="radio" id="first" name="cls" value="first"><label for="first">First</label>
              </div>
            </div>
          </div>

          <div class="row" style="margin-top:8px">
            <div class="col-6">
              <label>Huurauto nodig?</label>
              <div class="pill">
                <input type="radio" id="car-no" name="car" value="no" checked><label for="car-no">Nee</label>
                <input type="radio" id="car-yes" name="car" value="yes"><label for="car-yes">Ja</label>
              </div>
            </div>
            <div class="col-6" id="carBlock" class="hidden">
              <label>Auto voorkeur</label>
              <div class="pill">
                <input type="radio" id="type-hb" name="carType" value="hatchback" checked><label for="type-hb">Hatchback</label>
                <input type="radio" id="type-sd" name="carType" value="sedan"><label for="type-sd">Sedan</label>
                <input type="radio" id="type-mpv" name="carType" value="mpv"><label for="type-mpv">MPV</label>
                <input type="radio" id="type-suv" name="carType" value="suv"><label for="type-suv">SUV</label>
                <input type="radio" id="type-4x4" name="carType" value="4x4"><label for="type-4x4">Terrein</label>
              </div>
              <div class="pill" style="margin-top:6px">
                <input type="radio" id="tr-auto" name="trans" value="auto" checked><label for="tr-auto">Automaat</label>
                <input type="radio" id="tr-man" name="trans" value="manueel"><label for="tr-man">Handgeschakeld</label>
              </div>
              <label for="driverAge" style="margin-top:6px">Leeftijd bestuurder</label>
              <select id="driverAge">
                <option value="18-21">18–21</option>
                <option value="22-24">22–24</option>
                <option value="25-70" selected>25–70</option>
                <option value="70+">70+</option>
              </select>
            </div>
          </div>

          <div class="row" style="margin-top:8px">
            <div class="col-12">
              <label>Accommodatie</label>
              <div class="pill">
                <input type="checkbox" id="acc-hotel" value="hotel" checked><label for="acc-hotel">Hotel</label>
                <input type="checkbox" id="acc-apt" value="appartement"><label for="acc-apt">Appartement</label>
                <input type="checkbox" id="acc-house" value="huis"><label for="acc-house">Huis</label>
                <input type="checkbox" id="acc-hostel" value="hostel"><label for="acc-hostel">Hostel</label>
                <input type="checkbox" id="acc-ai" value="allinclusive"><label for="acc-ai">All inclusive</label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- CRUISE SPECIFIEK -->
      <section id="block-cruise" class="card hidden">
        <h2>3) Cruise details</h2>
        <div class="body">
          <div class="row">
            <div class="col-6">
              <label for="cruise-area">Cruisegebied</label>
              <select id="cruise-area">
                <option value="caraiben">Caraïben</option>
                <option value="noordzee">Noordzee</option>
                <option value="middellandse">Middellandse Zee</option>
                <option value="antarctica">Antarctica</option>
              </select>
            </div>
            <div class="col-6">
              <label for="cruise-port">Vertrekhaven</label>
              <select id="cruise-port">
                <option value="Rotterdam" selected>Rotterdam</option>
                <option value="Barcelona">Barcelona</option>
                <option value="Miami">Miami</option>
                <option value="Genua">Genua</option>
              </select>
            </div>
          </div>

          <div class="row" style="margin-top:8px">
            <div class="col-4">
              <label for="cruise-duration">Duur</label>
              <select id="cruise-duration">
                <option value="3-5">3–5 nachten</option>
                <option value="7-10" selected>7–10 nachten</option>
                <option value="14+">14+ nachten</option>
              </select>
            </div>
            <div class="col-4">
              <label for="cruise-cabin">Hut-type</label>
              <select id="cruise-cabin">
                <option value="inside">Binnenhut</option>
                <option value="balcony" selected>Balkon</option>
                <option value="suite">Suite</option>
              </select>
            </div>
          </div>
        </div>
      </section>

      <!-- ACTIES -->
      <section class="card">
        <div class="actions">
          <a class="btn btn-ghost" href="index.html">Terug</a>
          <button class="btn btn-cta" type="submit">Toon mijn opties</button>
        </div>
      </section>
    </form>
  </main>

  <script>
  // ... laat alle bestaande helpers staan (budget/kids/type etc.)
  document.getElementById('f').addEventListener('submit', (e)=>{
    e.preventDefault();

    // Validatie datums (niet verleden, retour ≥ vertrek)
    const today = new Date().toISOString().slice(0,10);
    const d1 = new Date(document.getElementById('depart').value);
    const d2 = new Date(document.getElementById('return').value);
    if (isNaN(d1) || isNaN(d2) || d1 < new Date(today) || d2 < d1) {
      const err = document.getElementById('baseErr');
      if (err) { err.textContent = 'Datums ongeldig (niet in verleden, retour ≥ vertrek).'; err.style.display='block'; }
      return;
    }

    const type = (new FormData(document.getElementById('f')).get('type')) || 'surprise';
    const getCheckedValues = (sel) => Array.from(document.querySelectorAll(sel)).filter(x=>x.checked).map(x=>x.value).join(',');

    const params = new URLSearchParams({
      type,
      depart: document.getElementById('depart').value,
      return: document.getElementById('return').value,
      flex: document.getElementById('flex').value,
      adults: document.getElementById('adults').value,
      children: document.getElementById('children').value,
      budget: document.getElementById('budget').value,
    });

    // kinderen leeftijden
    const agesEls = document.querySelectorAll('.kidAge');
    if (agesEls.length) params.set('kids', Array.from(agesEls).map(s=>s.value).join(','));

    if (type === 'surprise') {
      params.set('from', document.getElementById('surp-origin').value);
      const prefs = getCheckedValues('#block-surprise input[type="checkbox"]');
      if (prefs) params.set('prefs', prefs);
    }

    if (type === 'flight') {
      params.set('from', document.getElementById('f-origin').value);
      params.set('to',   document.getElementById('f-dest').value);
      params.set('stops', getCheckedValues('#block-flight #direct, #block-flight #stop'));
      const cls = document.querySelector('#block-flight input[name="cls"]:checked');
      if (cls) params.set('class', cls.value);
      params.set('acc', getCheckedValues('#block-flight input[type="checkbox"]'));
      const car = document.querySelector('input[name="car"]:checked')?.value || 'no';
      params.set('car', car);
      if (car === 'yes') {
        params.set('carType', document.querySelector('input[name="carType"]:checked')?.value || '');
        params.set('trans',   document.querySelector('input[name="trans"]:checked')?.value || '');
        params.set('driverAge', document.getElementById('driverAge').value);
      }
    }

    if (type === 'cruise') {
      params.set('area',     document.getElementById('cruise-area').value);
      params.set('port',     document.getElementById('cruise-port').value);
      params.set('duration', document.getElementById('cruise-duration').value);
      params.set('cabin',    document.getElementById('cruise-cabin').value);
    }

    // Doorsturen naar resultaten
    location.href = 'results.html?' + params.toString();
  });
</script>

</body>
</html>




